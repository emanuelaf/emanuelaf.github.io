<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Elections report</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-1.1/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-1.1/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Emanuela Furfaro</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Data analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Heading 1</li>
    <li>
      <a href="elections.html">Elections</a>
    </li>
    <li>
      <a href="restaurants.html">Restaurant rating</a>
    </li>
    <li class="dropdown-header">Data visualisation</li>
    <li>
      <a href="age-pyramid.html">Age pyramid</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Statistics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Heading 1</li>
    <li>
      <a href="lln.html">Page A</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Elections report</h1>

</div>


<p>In one of my lessons I was to give students an overview on how to compile reports with rmarkdown. As Italians, when it gets to elections time, elections is the only thing we hear about in the news for months and decided to get them to work on the results of our elections.</p>
<p>This year’s data results is not ready for download yet. Hence I decided to work on the previous elections, that is the 2013 elections.</p>
<p>The report is completely parametrized, so it is not hard to make it work on the new year’s elections.</p>
<div id="data-manipulation" class="section level2">
<h2>Data manipulation</h2>
<!-- Forse dati migliori qui http://www.camera.it/leg17/1209,
oppure versione già aggregata qui http://elezionistorico.interno.gov.it/index.php?tpel=C&dtel=24/02/2013&tpa=I&tpe=A&lev0=0&levsut0=0&es0=S&ms=S
-->
<!--I downloaded the data from ... (apis?). As it seems that the website does not have good apis, I uploaded the data on my github so that you can access it too without having to trouble too much like I did. -->
<p>The file is a semi-colon separated file so we import it with the <code>read_delim()</code> and then we easily manipulate the dataset:</p>
<pre class="r"><code>elections &lt;- read_delim(&quot;data/camera_2013_liste_italia.csv&quot;, delim = &quot;;&quot;) %&gt;%
  mutate_all(funs(tolower(.))) </code></pre>
<p>and we make all letters lower cases:</p>
<pre class="r"><code>names(elections) &lt;- tolower(names(elections))</code></pre>
<p>So that the dataset looks like this:</p>
<?xml version="1.0" encoding="UTF-8"?>
<table class="table" style="font-size: 11px; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
dataelezione
</th>
<th style="text-align:left;">
numlista
</th>
<th style="text-align:left;">
circoscrizione
</th>
<th style="text-align:left;">
provincia
</th>
<th style="text-align:left;">
comune
</th>
<th style="text-align:left;">
lista
</th>
<th style="text-align:left;">
votilista
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
24/02/2013
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
piemonte 1
</td>
<td style="text-align:left;">
torino
</td>
<td style="text-align:left;">
aglie’
</td>
<td style="text-align:left;">
sinistra ecologia liberta’
</td>
<td style="text-align:left;">
38
</td>
</tr>
<tr>
<td style="text-align:left;">
24/02/2013
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
piemonte 1
</td>
<td style="text-align:left;">
torino
</td>
<td style="text-align:left;">
aglie’
</td>
<td style="text-align:left;">
centro democratico
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
24/02/2013
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
piemonte 1
</td>
<td style="text-align:left;">
torino
</td>
<td style="text-align:left;">
aglie’
</td>
<td style="text-align:left;">
partito democratico
</td>
<td style="text-align:left;">
368
</td>
</tr>
<tr>
<td style="text-align:left;">
24/02/2013
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
piemonte 1
</td>
<td style="text-align:left;">
torino
</td>
<td style="text-align:left;">
aglie’
</td>
<td style="text-align:left;">
rivoluzione civile
</td>
<td style="text-align:left;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
24/02/2013
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
piemonte 1
</td>
<td style="text-align:left;">
torino
</td>
<td style="text-align:left;">
aglie’
</td>
<td style="text-align:left;">
mir - moderati in rivoluzione
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
24/02/2013
</td>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
piemonte 1
</td>
<td style="text-align:left;">
torino
</td>
<td style="text-align:left;">
aglie’
</td>
<td style="text-align:left;">
fratelli d’italia
</td>
<td style="text-align:left;">
34
</td>
</tr>
</tbody>
</table>
<p>with info on 152621 sections.</p>
<p>Here we have got some data manipulation to do in order to have data which is easier to treat.</p>
<ol style="list-style-type: decimal">
<li><p>The column <code>circoscrizione</code>, contains the name of the section in which votes were counted. Each section is called region_name and a number. We want to get rid of such number and just keep the info on the region, so that we can aggregate by region and then come out with region level information.</p></li>
<li><p>We want to aggragate data at region level and calculate the percentage of votes received by each party</p></li>
</ol>
<pre class="r"><code>elections &lt;- elections %&gt;%
  separate(circoscrizione, c(&quot;region&quot;, &quot;other&quot;), &quot; &quot;) %&gt;%
  group_by(region, lista) %&gt;%
  mutate(votilista = as.numeric(votilista)) %&gt;%
  summarise(votes = sum(votilista)) %&gt;%
  mutate(perc_votes = round(votes/sum(votes)*100, 2))</code></pre>
<p>So that the final dataset looks as follows:</p>
<?xml version="1.0" encoding="UTF-8"?>
<table class="table" style="font-size: 11px; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
region
</th>
<th style="text-align:left;">
lista
</th>
<th style="text-align:right;">
votes
</th>
<th style="text-align:right;">
perc_votes
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
abruzzo
</td>
<td style="text-align:left;">
casapound italia
</td>
<td style="text-align:right;">
2580
</td>
<td style="text-align:right;">
0.33
</td>
</tr>
<tr>
<td style="text-align:left;">
abruzzo
</td>
<td style="text-align:left;">
centro democratico
</td>
<td style="text-align:right;">
4492
</td>
<td style="text-align:right;">
0.58
</td>
</tr>
<tr>
<td style="text-align:left;">
abruzzo
</td>
<td style="text-align:left;">
fare per fermare il declino
</td>
<td style="text-align:right;">
4452
</td>
<td style="text-align:right;">
0.57
</td>
</tr>
<tr>
<td style="text-align:left;">
abruzzo
</td>
<td style="text-align:left;">
forza nuova
</td>
<td style="text-align:right;">
2964
</td>
<td style="text-align:right;">
0.38
</td>
</tr>
<tr>
<td style="text-align:left;">
abruzzo
</td>
<td style="text-align:left;">
fratelli d’italia
</td>
<td style="text-align:right;">
27693
</td>
<td style="text-align:right;">
3.56
</td>
</tr>
<tr>
<td style="text-align:left;">
abruzzo
</td>
<td style="text-align:left;">
futuro e liberta’
</td>
<td style="text-align:right;">
5703
</td>
<td style="text-align:right;">
0.73
</td>
</tr>
</tbody>
</table>
</div>
<div id="how-many-votes-for-the-democratic-party" class="section level2">
<h2>How many votes for the Democratic Party?</h2>
<p>Let us now focus on one party. For example we may focus on the Democratic Party that “won” the 2013 elections.</p>
<p>First let us see what was the percentage of votes that it got in each region</p>
<pre class="r"><code>tab1 &lt;- elections %&gt;%
  filter(lista == &quot;partito democratico&quot;) %&gt;%
  select(-lista) %&gt;%
  arrange(desc(perc_votes))  %&gt;%
  ungroup()

knitr::kable(tab1, col.names = c(&quot;Region&quot;, &quot;Num. of votes&quot;, &quot;Percentage of votes&quot;), &quot;html&quot;) %&gt;%
  kableExtra::kable_styling(full_width = F, font_size = 11, position = &quot;center&quot;)</code></pre>
<?xml version="1.0" encoding="UTF-8"?>
<table class="table" style="font-size: 11px; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Region
</th>
<th style="text-align:right;">
Num. of votes
</th>
<th style="text-align:right;">
Percentage of votes
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
toscana
</td>
<td style="text-align:right;">
831546
</td>
<td style="text-align:right;">
37.47
</td>
</tr>
<tr>
<td style="text-align:left;">
emilia
</td>
<td style="text-align:right;">
989660
</td>
<td style="text-align:right;">
37.04
</td>
</tr>
<tr>
<td style="text-align:left;">
umbria
</td>
<td style="text-align:right;">
168820
</td>
<td style="text-align:right;">
32.07
</td>
</tr>
<tr>
<td style="text-align:left;">
liguria
</td>
<td style="text-align:right;">
258763
</td>
<td style="text-align:right;">
27.69
</td>
</tr>
<tr>
<td style="text-align:left;">
marche
</td>
<td style="text-align:right;">
256968
</td>
<td style="text-align:right;">
27.69
</td>
</tr>
<tr>
<td style="text-align:left;">
basilicata
</td>
<td style="text-align:right;">
79696
</td>
<td style="text-align:right;">
25.70
</td>
</tr>
<tr>
<td style="text-align:left;">
lazio
</td>
<td style="text-align:right;">
850784
</td>
<td style="text-align:right;">
25.70
</td>
</tr>
<tr>
<td style="text-align:left;">
lombardia
</td>
<td style="text-align:right;">
1467161
</td>
<td style="text-align:right;">
25.60
</td>
</tr>
<tr>
<td style="text-align:left;">
sardegna
</td>
<td style="text-align:right;">
232895
</td>
<td style="text-align:right;">
25.16
</td>
</tr>
<tr>
<td style="text-align:left;">
piemonte
</td>
<td style="text-align:right;">
643835
</td>
<td style="text-align:right;">
25.10
</td>
</tr>
<tr>
<td style="text-align:left;">
friuli-venezia
</td>
<td style="text-align:right;">
178149
</td>
<td style="text-align:right;">
24.72
</td>
</tr>
<tr>
<td style="text-align:left;">
molise
</td>
<td style="text-align:right;">
42599
</td>
<td style="text-align:right;">
22.65
</td>
</tr>
<tr>
<td style="text-align:left;">
abruzzo
</td>
<td style="text-align:right;">
175968
</td>
<td style="text-align:right;">
22.61
</td>
</tr>
<tr>
<td style="text-align:left;">
calabria
</td>
<td style="text-align:right;">
209897
</td>
<td style="text-align:right;">
22.37
</td>
</tr>
<tr>
<td style="text-align:left;">
campania
</td>
<td style="text-align:right;">
652883
</td>
<td style="text-align:right;">
21.87
</td>
</tr>
<tr>
<td style="text-align:left;">
veneto
</td>
<td style="text-align:right;">
628384
</td>
<td style="text-align:right;">
21.34
</td>
</tr>
<tr>
<td style="text-align:left;">
sicilia
</td>
<td style="text-align:right;">
467410
</td>
<td style="text-align:right;">
18.61
</td>
</tr>
<tr>
<td style="text-align:left;">
puglia
</td>
<td style="text-align:right;">
407900
</td>
<td style="text-align:right;">
18.49
</td>
</tr>
<tr>
<td style="text-align:left;">
trentino-alto
</td>
<td style="text-align:right;">
101224
</td>
<td style="text-align:right;">
16.70
</td>
</tr>
</tbody>
</table>
<p>It seems that the democratic party is strong in central Italy, a bit less strong in the north of Italy, and definately not that appealing for the Southern Italy. For those that do not know the geography of Italy that well, let us join the information on the macro area near each region:</p>
<pre class="r"><code>macro_area &lt;- read_csv(&quot;data/macro-area&quot;)
  
tab1 &lt;- left_join(tab1, macro_area, by = c(&quot;region&quot;))

knitr::kable(tab1, col.names = c(&quot;Region&quot;, &quot;Num. of votes&quot;, &quot;Percentage of votes&quot;, &quot;Macroarea&quot;), &quot;html&quot;) %&gt;%
  kableExtra::kable_styling(full_width = F, font_size = 11, position = &quot;center&quot;)</code></pre>
<?xml version="1.0" encoding="UTF-8"?>
<table class="table" style="font-size: 11px; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Region
</th>
<th style="text-align:right;">
Num. of votes
</th>
<th style="text-align:right;">
Percentage of votes
</th>
<th style="text-align:left;">
Macroarea
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
toscana
</td>
<td style="text-align:right;">
831546
</td>
<td style="text-align:right;">
37.47
</td>
<td style="text-align:left;">
centro
</td>
</tr>
<tr>
<td style="text-align:left;">
emilia
</td>
<td style="text-align:right;">
989660
</td>
<td style="text-align:right;">
37.04
</td>
<td style="text-align:left;">
centro
</td>
</tr>
<tr>
<td style="text-align:left;">
umbria
</td>
<td style="text-align:right;">
168820
</td>
<td style="text-align:right;">
32.07
</td>
<td style="text-align:left;">
centro
</td>
</tr>
<tr>
<td style="text-align:left;">
liguria
</td>
<td style="text-align:right;">
258763
</td>
<td style="text-align:right;">
27.69
</td>
<td style="text-align:left;">
nord
</td>
</tr>
<tr>
<td style="text-align:left;">
marche
</td>
<td style="text-align:right;">
256968
</td>
<td style="text-align:right;">
27.69
</td>
<td style="text-align:left;">
centro
</td>
</tr>
<tr>
<td style="text-align:left;">
basilicata
</td>
<td style="text-align:right;">
79696
</td>
<td style="text-align:right;">
25.70
</td>
<td style="text-align:left;">
sud e isole
</td>
</tr>
<tr>
<td style="text-align:left;">
lazio
</td>
<td style="text-align:right;">
850784
</td>
<td style="text-align:right;">
25.70
</td>
<td style="text-align:left;">
centro
</td>
</tr>
<tr>
<td style="text-align:left;">
lombardia
</td>
<td style="text-align:right;">
1467161
</td>
<td style="text-align:right;">
25.60
</td>
<td style="text-align:left;">
nord
</td>
</tr>
<tr>
<td style="text-align:left;">
sardegna
</td>
<td style="text-align:right;">
232895
</td>
<td style="text-align:right;">
25.16
</td>
<td style="text-align:left;">
sud e isole
</td>
</tr>
<tr>
<td style="text-align:left;">
piemonte
</td>
<td style="text-align:right;">
643835
</td>
<td style="text-align:right;">
25.10
</td>
<td style="text-align:left;">
nord
</td>
</tr>
<tr>
<td style="text-align:left;">
friuli-venezia
</td>
<td style="text-align:right;">
178149
</td>
<td style="text-align:right;">
24.72
</td>
<td style="text-align:left;">
nord
</td>
</tr>
<tr>
<td style="text-align:left;">
molise
</td>
<td style="text-align:right;">
42599
</td>
<td style="text-align:right;">
22.65
</td>
<td style="text-align:left;">
sud e isole
</td>
</tr>
<tr>
<td style="text-align:left;">
abruzzo
</td>
<td style="text-align:right;">
175968
</td>
<td style="text-align:right;">
22.61
</td>
<td style="text-align:left;">
centro
</td>
</tr>
<tr>
<td style="text-align:left;">
calabria
</td>
<td style="text-align:right;">
209897
</td>
<td style="text-align:right;">
22.37
</td>
<td style="text-align:left;">
sud e isole
</td>
</tr>
<tr>
<td style="text-align:left;">
campania
</td>
<td style="text-align:right;">
652883
</td>
<td style="text-align:right;">
21.87
</td>
<td style="text-align:left;">
sud e isole
</td>
</tr>
<tr>
<td style="text-align:left;">
veneto
</td>
<td style="text-align:right;">
628384
</td>
<td style="text-align:right;">
21.34
</td>
<td style="text-align:left;">
nord
</td>
</tr>
<tr>
<td style="text-align:left;">
sicilia
</td>
<td style="text-align:right;">
467410
</td>
<td style="text-align:right;">
18.61
</td>
<td style="text-align:left;">
sud e isole
</td>
</tr>
<tr>
<td style="text-align:left;">
puglia
</td>
<td style="text-align:right;">
407900
</td>
<td style="text-align:right;">
18.49
</td>
<td style="text-align:left;">
sud e isole
</td>
</tr>
<tr>
<td style="text-align:left;">
trentino-alto
</td>
<td style="text-align:right;">
101224
</td>
<td style="text-align:right;">
16.70
</td>
<td style="text-align:left;">
nord
</td>
</tr>
</tbody>
</table>
<div id="those-that-did-not-vote-for-the-democratic-party-did-they-vote-for-another-left-wing-party" class="section level3">
<h3>Those that did not vote for the democratic party, did they vote for another left wing party?</h3>
<p>In other words, I would like to find out whether there are regions in which both the percentage of votes to the democratic party and the percentage of votes to another left wing party are high. By doing so I should identify left-wing regions where both percentages are high and righ wing regions in which both percentage are low. Or regions in which one of the two party has attracted most votes leavig the other one with none.</p>
<p>At the time, the second biggest left wing party was called “ecologia sinistra liberta’”.</p>
<pre class="r"><code>tab2 &lt;- elections %&gt;%
  filter(lista == &quot;sinistra ecologia liberta&#39;&quot;) %&gt;%
  select(-lista) %&gt;%
  ungroup()

tab2 &lt;- left_join(tab1, tab2, by = &quot;region&quot;, suffix = c(&quot;.party1&quot;, &quot;.party2&quot;)) 

ggplot(data = tab2, aes(x = perc_votes.party1, y = perc_votes.party2)) +
  geom_point(aes(col = macroarea), size = 1) +
  labs(y = &quot;Other left wing party&quot;, x = &quot;Democratic Party&quot;) +
  geom_label_repel(aes(label = region, col = macroarea), size = 3) +
  theme_bw()</code></pre>
<p><img src="elections_files/figure-html/analisi%20partito2-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>The plot returns what we expected. Central Italian regions such as Tuscany and Emilia-Romagna are well known for being left wing regions and in fact both the Democratic Party and the second largest left wing party got quite a good percentage of votes, while other regions, such as Veneto and Sicily, both left parties did not go well. Puglia at the time had a governor of “sinistra ecologia liberta’”, hence the left party votes in that region went mainly to it, disadvantaging the Democratic Party.</p>
</div>
</div>
<div id="mapping-the-votes" class="section level2">
<h2>Mapping the votes</h2>
<p>Last let us visualise on a map what is happening to the Italian peninsula. Using the development version of the package <code>mapIT</code> available on github, we plot the data. Notice that the <code>mapIT</code> function works with regions id, hence we better make sure that the regions are correctly identified.</p>
<p>Here is the percentage of votes obtained by the Democratic Party on the Italian map:</p>
<pre class="r"><code>require(mapIT)

mapIT(perc_votes, region, data = data.frame(tab1),
      graphPar = list(low = &quot;#F5A9A9&quot;, high = &quot;#DF0101&quot;,
      show_guide = &quot;Percentage of votes&quot;))</code></pre>
<p><img src="elections_files/figure-html/unnamed-chunk-7-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="parametrize-your-report-with-rmarkdown" class="section level2">
<h2>Parametrize your report with <code>Rmarkdown</code></h2>
<p>All the above analysis is focused on the situation of the Italian left wing party in the 2013 elections. However one may be interested in a different year or different parties.</p>
<p>You can do that by paramtrising your report with Rmarkdown and here is how you can do that.</p>
<p>At the very beginning of your <code>.Rmd</code> file you find</p>
<pre><code>---
  title: &quot;Title&quot;
author: &quot;Author&quot;
date: &quot;&quot;
output:
  pdf_document: default
html_document: default</code></pre>
<p>Here you may add your parameters:</p>
<pre><code>---
  title: &quot;Title&quot;
author: &quot;Author&quot;
date: &quot;&quot;
output:
  pdf_document: default
html_document: default
params:
  party1: partito democratico
  party2: sinistra ecologia liberta&#39;
  year: 2013
---</code></pre>
<p>We have added 3 parameters: one indicating the year, that in this case may only be 2013 as data on other year’s elections is not included in the file, one indictaing the main party we analyse and the second one indicating the second party with whom we want to compare it.</p>
<p>Then, every tim you want to mention the democratic party, you should write <code>r params$party1</code> and so on.</p>
<p>If you want to analyse a different party you just modify party1 or party2 and then compile your report by clicking on the <code>Knit</code> botton.</p>
<p>If you click on <code>Knit with parameters</code> a user interface, based on Shiny, will open up and you will be able to enter and modify the parameters. At this point it may be nice to provide a list of all the possible values for that parameter: so for instance you may add the main parties:</p>
<pre><code>---
  title: &quot;&quot;
author: &quot;&quot;
date: &quot;&quot;
output:
  html_document: default
pdf_document: default
params:
  year: 2013
party1:
  choices:
  - partito democratico
- sinistra ecologia liberta&#39;
- popolo delle liberta&#39;
- lega nord
- fratelli d&#39;italia
    - movimento 5 stelle beppegrillo.it
    input: select
    label: &#39;Main party:&#39;
    value: partito democratico
  party2:
    choices:
    - partito democratico
    - sinistra ecologia liberta&#39;
- popolo delle liberta&#39;
    - lega nord
    - fratelli d&#39;italia
- movimento 5 stelle beppegrillo.it
input: select
label: &#39;Comparison party:&#39;
value: sinistra ecologia liberta&#39;
---</code></pre>
<p>This code will open up an interface in which you can enter the year, then you can choose the main party from a list of 6 possible values and then a comparison party from a drop down menu with 6 different alternatives.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
