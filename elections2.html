<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Italian elections results</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-1.1/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-1.1/highlight.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}

.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Emanuela Furfaro</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Data analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="data-an-workflow.html">The Data Workflow</a>
    </li>
    <li>
      <a href="elections2.html">Elections</a>
    </li>
    <li>
      <a href="restaurants.html">Restaurant rating</a>
    </li>
    <li>
      <a href="pred-sales.html">Predicting Sales</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Data Visualisation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="age-pyramid.html">Age pyramid</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Statistics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Asymptotic Theorems</li>
    <li>
      <a href="lln.html">The Law of Large numbers</a>
    </li>
    <li>
      <a href="tcl.html">The Central Limit Theorem</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/emanuelaf">
    <span class="fa fa-github"></span>
     
    GitHub
  </a>
</li>
<li>
  <a href="mailto:furfaro.emanuela@gmail.com">
    <span class="fa fa-envelope-o"></span>
     
    Email
  </a>
</li>
<li>
  <a href="https://www.linkedin.com/in/emanuela-f/">
    <span class="fa fa-linkedin"></span>
     
    Linkedin
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Italian elections results</h1>

</div>


<p>In this article I investigate the performance of Italian parties in the 2018 political elections. In particular I would like to focus on the left wing party (democratic party) that during the 2018 political elections seems to have undergone a severe decline.</p>
<div id="data-preparation" class="section level2">
<h2>Data Preparation</h2>
<p>The data I will be using was downloaded from the <a href="http://dait.interno.gov.it/elezioni/open-data/dati-elezioni-politiche-4-marzo-2018">data section of the website of the Italian Interior Ministry</a>.</p>
<p>I then translated into English the variables’ names and the so modified daaset is now available on my github repo <code>emanuelaf/emanuelaf.github.io</code>.</p>
<div id="import-data-from-online-github-repo" class="section level3">
<h3>Import data from online github repo</h3>
<p>First of all we need to load the packages we’ll be using throughout the analysis:</p>
<pre class="r"><code>require(tidyverse)
require(devtools)
require(readxl)
require(ggrepel)</code></pre>
<p>Then we can download the data. We need to import two files:</p>
<ul>
<li><em>camera_2018_italy.csv</em> that contains the number of votes each party received in each electoral district</li>
<li><em>macro-aree</em> that contains information on the macroarea each Italian region belongs to</li>
</ul>
<p>The first file contains the actual information on the number of votes to each party, while the second file contains additional info that may help us better understand the “geography” of the votes.</p>
<p>Files can be downloaded straight from github and parsed to <code>R</code> as follows:</p>
<pre class="r"><code>urlfile &lt;- &quot;https://raw.githubusercontent.com/emanuelaf/emanuelaf.github.io/master/camera_2018_italy.csv&quot;
elections &lt;- read_csv(urlfile)

urlfile2 &lt;- &quot;https://raw.githubusercontent.com/emanuelaf/emanuelaf.github.io/master/macro-area&quot;
macroarea &lt;- read_csv(urlfile2)</code></pre>
</div>
<div id="data-manipulation" class="section level3">
<h3>Data manipulation</h3>
<p>The longest part in the data workflow is to get the data the way we want it.</p>
<p>As <code>R</code> is case sensitive, the first thing I usually do is to set the whole dataset to lower cases. Let us do this into two steps, first making all the variables lower case and then transforming the variales’ names themselves to lower cases:</p>
<pre class="r"><code>elections &lt;- elections %&gt;%
  mutate_all(funs(tolower(.)))

colnames(elections) &lt;- tolower(colnames(elections))</code></pre>
<p>The dataset (with its first few columns) looks like this:</p>
<?xml version="1.0" encoding="UTF-8"?>
<table class="table" style="font-size: 11px; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
electoral_district
</th>
<th style="text-align:left;">
plurinominal
</th>
<th style="text-align:left;">
uninominal
</th>
<th style="text-align:left;">
province
</th>
<th style="text-align:left;">
municipality
</th>
<th style="text-align:left;">
name
</th>
<th style="text-align:left;">
surname
</th>
<th style="text-align:left;">
party
</th>
<th style="text-align:left;">
electors
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
piemonte 1
</td>
<td style="text-align:left;">
piemonte 1 - 01
</td>
<td style="text-align:left;">
06 collegno
</td>
<td style="text-align:left;">
torino
</td>
<td style="text-align:left;">
alpignano
</td>
<td style="text-align:left;">
celeste
</td>
<td style="text-align:left;">
d’arrando
</td>
<td style="text-align:left;">
movimento 5 stelle
</td>
<td style="text-align:left;">
13746
</td>
</tr>
<tr>
<td style="text-align:left;">
piemonte 1
</td>
<td style="text-align:left;">
piemonte 1 - 01
</td>
<td style="text-align:left;">
06 collegno
</td>
<td style="text-align:left;">
torino
</td>
<td style="text-align:left;">
alpignano
</td>
<td style="text-align:left;">
sara
</td>
<td style="text-align:left;">
zambaia
</td>
<td style="text-align:left;">
lega
</td>
<td style="text-align:left;">
13746
</td>
</tr>
<tr>
<td style="text-align:left;">
piemonte 1
</td>
<td style="text-align:left;">
piemonte 1 - 01
</td>
<td style="text-align:left;">
06 collegno
</td>
<td style="text-align:left;">
torino
</td>
<td style="text-align:left;">
alpignano
</td>
<td style="text-align:left;">
sara
</td>
<td style="text-align:left;">
zambaia
</td>
<td style="text-align:left;">
forza italia
</td>
<td style="text-align:left;">
13746
</td>
</tr>
<tr>
<td style="text-align:left;">
piemonte 1
</td>
<td style="text-align:left;">
piemonte 1 - 01
</td>
<td style="text-align:left;">
06 collegno
</td>
<td style="text-align:left;">
torino
</td>
<td style="text-align:left;">
alpignano
</td>
<td style="text-align:left;">
sara
</td>
<td style="text-align:left;">
zambaia
</td>
<td style="text-align:left;">
fratelli d’italia con giorgia meloni
</td>
<td style="text-align:left;">
13746
</td>
</tr>
<tr>
<td style="text-align:left;">
piemonte 1
</td>
<td style="text-align:left;">
piemonte 1 - 01
</td>
<td style="text-align:left;">
06 collegno
</td>
<td style="text-align:left;">
torino
</td>
<td style="text-align:left;">
alpignano
</td>
<td style="text-align:left;">
sara
</td>
<td style="text-align:left;">
zambaia
</td>
<td style="text-align:left;">
noi con l’italia - udc
</td>
<td style="text-align:left;">
13746
</td>
</tr>
<tr>
<td style="text-align:left;">
piemonte 1
</td>
<td style="text-align:left;">
piemonte 1 - 01
</td>
<td style="text-align:left;">
06 collegno
</td>
<td style="text-align:left;">
torino
</td>
<td style="text-align:left;">
alpignano
</td>
<td style="text-align:left;">
umberto
</td>
<td style="text-align:left;">
d’ottavio
</td>
<td style="text-align:left;">
partito democratico
</td>
<td style="text-align:left;">
13746
</td>
</tr>
</tbody>
</table>
<p>with 20 variables collected on the 133068 Italian electoral districts.</p>
<p>We need some more data manipulation in order to have data which is easier to treat. In fact instead of looking at electoral district level data, we may want to aggragate data at region level and calculate the percentage of votes received by each party.</p>
<p>Looking at our dataset, aggregating by region is possible. In fact the column <code>electoral_district</code>, contains the name of the discrict in which votes were counted. Each district is called by the region name and a number. We can manipulate the column containing the district name in order to get the region name, so that we can then aggregate by region and come up with region level information. The following code does so:</p>
<pre class="r"><code>elections_region &lt;- elections %&gt;%
  separate(electoral_district, c(&quot;region&quot;, &quot;other&quot;), &quot; &quot;) %&gt;%
  group_by(region, party) %&gt;%
  summarise(votes = sum(as.numeric(numvotes))) %&gt;%
  mutate(perc_votes = round(votes/sum(votes)*100, 2)) %&gt;% 
  ungroup() %&gt;%
  left_join(macroarea)</code></pre>
<p>And our final dataset looks like this:</p>
<?xml version="1.0" encoding="UTF-8"?>
<table class="table" style="font-size: 11px; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
region
</th>
<th style="text-align:left;">
party
</th>
<th style="text-align:right;">
votes
</th>
<th style="text-align:right;">
perc_votes
</th>
<th style="text-align:left;">
macroarea
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
abruzzo
</td>
<td style="text-align:left;">
10 volte meglio
</td>
<td style="text-align:right;">
1186
</td>
<td style="text-align:right;">
0.16
</td>
<td style="text-align:left;">
centre
</td>
</tr>
<tr>
<td style="text-align:left;">
abruzzo
</td>
<td style="text-align:left;">
casapound italia
</td>
<td style="text-align:right;">
7393
</td>
<td style="text-align:right;">
1.01
</td>
<td style="text-align:left;">
centre
</td>
</tr>
<tr>
<td style="text-align:left;">
abruzzo
</td>
<td style="text-align:left;">
civica popolare lorenzin
</td>
<td style="text-align:right;">
6938
</td>
<td style="text-align:right;">
0.95
</td>
<td style="text-align:left;">
centre
</td>
</tr>
<tr>
<td style="text-align:left;">
abruzzo
</td>
<td style="text-align:left;">
+europa
</td>
<td style="text-align:right;">
13754
</td>
<td style="text-align:right;">
1.89
</td>
<td style="text-align:left;">
centre
</td>
</tr>
<tr>
<td style="text-align:left;">
abruzzo
</td>
<td style="text-align:left;">
forza italia
</td>
<td style="text-align:right;">
107573
</td>
<td style="text-align:right;">
14.75
</td>
<td style="text-align:left;">
centre
</td>
</tr>
<tr>
<td style="text-align:left;">
abruzzo
</td>
<td style="text-align:left;">
fratelli d’italia con giorgia meloni
</td>
<td style="text-align:right;">
36629
</td>
<td style="text-align:right;">
5.02
</td>
<td style="text-align:left;">
centre
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="data-analysis" class="section level2">
<h2>Data analysis</h2>
<p>Let us know start answering questions on the left wing party which seems to have undergone a decline in the latest elections.</p>
<div id="how-many-votes-for-the-democratic-party" class="section level3">
<h3>How many votes for the Democratic Party?</h3>
<p>The Democratic Party that “won” the 2013 elections, but that did not do well in 2018. The percentage of votes the Democratic Party got in each region is the following:</p>
<pre class="r"><code>tab1 &lt;- elections_region %&gt;%
  filter(party == &quot;partito democratico&quot;) %&gt;%
  select(-party) %&gt;%
  arrange(desc(perc_votes))  %&gt;%
  ungroup()

tab1_b &lt;- tab1

tab1_b$region &lt;- reorder(tab1_b$region, tab1_b$perc_votes)

ggplot(tab1_b) +
  geom_bar(aes(x = region, y = perc_votes, fill = macroarea), 
           stat = &quot;identity&quot;, col = &quot;black&quot;, alpha = 0.5) +
  scale_y_continuous(labels = function(perc_votes) paste0(perc_votes, &quot;%&quot;)) +
  coord_flip() +
  theme_bw() +
  theme(legend.position=&quot;bottom&quot;, axis.text.x=element_text(angle=45, hjust=1))</code></pre>
<p><img src="elections2_files/figure-html/analisi%20partito-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>It seems that the democratic party is strong in central Italy, a bit less strong in the north of Italy, and definately not that appealing in Southern Italy. Notice that Tuscany, followed by some other central regions, has always been a fairly “left wing” region and it is still the region in which the democratic party is strongest. However in the previous elections the democratic party had received more votes.</p>
</div>
<div id="those-that-did-not-vote-for-the-democratic-party-did-they-vote-for-another-left-wing-party" class="section level3">
<h3>Those that did not vote for the democratic party, did they vote for another left wing party?</h3>
<p>In other words, I would like to find out whether there are regions in which both the percentage of votes to the democratic party and the percentage of votes to another left wing party are high. By doing so I should identify left-wing regions where both percentages are high and right wing regions in which both percentage are low. Or regions in which one of the two party has attracted most votes leaving the other left wing party with none.</p>
<p>The second biggest left wing party is called “liberi e uguali”:</p>
<pre class="r"><code>tab2 &lt;- elections_region %&gt;%
  filter(party == &quot;liberi e uguali&quot;) %&gt;%
  select(-party) %&gt;%
  ungroup()

tab2 &lt;- left_join(tab1, tab2, by = &quot;region&quot;, suffix = c(&quot;.party1&quot;, &quot;.party2&quot;)) 

ggplot(data = tab2, aes(x = perc_votes.party1, y = perc_votes.party2)) +
  geom_point(aes(col = macroarea.party1), size = 1) +
  labs(y = &quot;Other left wing party&quot;, x = &quot;Democratic Party&quot;) +
  scale_color_discrete(name=&quot;Macroarea&quot;) +
  geom_label_repel(aes(label = region, col = macroarea.party1), size = 3, show_guide=F) +
  theme_bw() +
  theme(legend.position=&quot;bottom&quot;)  </code></pre>
<p><img src="elections2_files/figure-html/analisi%20partito2-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>The plot returns what we expected. Central Italian regions such as Tuscany and Emilia-Romagna are well known for being left wing regions and in fact both the Democratic Party and the second largest left wing party got quite a good percentage of votes, while other regions, such as Molise and Sicily, both left parties did not go well. Basilicata seems to play an exception and the other left wing party seems to have attracted the left wing voters.</p>
</div>
<div id="mapping-the-votes" class="section level3">
<h3>Mapping the votes</h3>
<p>Last let us visualise on a map what is happening to the Italian peninsula. Using the development version of the package <code>mapIT</code> available on github, we plot the data.</p>
<p>There are different ways of creating maps in <code>R</code>. In this case, each region is a polygon identified by the region name. If we want to plot data on the map, we need to give <code>R</code> a dataset with region values identified by the region name. The <code>mapIT()</code> function will match each regional value with its polygon and colour the polygon according to it.</p>
<p>Hence we better make sure that the regions’ id in our dataset is the same as that recognised by the <code>mapIT()</code> function. The <code>mapIT()</code> function was developed so that blanks between words and alphanumeric characters are ignored. So, for example the region called “Trentino-Alto Adige” is correctly recognised even if it’s spelled ‘Trentino Alto Adige’ or ‘TrentinoAltoAdige’.</p>
<p>However, some of our region names were truncated due to the procedure we adopted for extracting the names from the electoral district variable. The following code lines fix this:</p>
<p>And here is the percentage of votes obtained by the Democratic Party on the Italian map:</p>
<pre class="r"><code>require(mapIT)

mapIT(perc_votes, region, data = data.frame(tab1),
      graphPar = list(low = &quot;#F5A9A9&quot;, high = &quot;#DF0101&quot;,
      show_guide = &quot;Percentage of votes&quot;))</code></pre>
<p><img src="elections2_files/figure-html/unnamed-chunk-8-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="conclusion" class="section level2">
<h2>Conclusion</h2>
<p>In this brief article we manipulated the dataset on Italian political elections, and printed plots and tables in order to investigate what happened to the democratic party during the latest elections.</p>
<p>Note that using the same code, one could choose to focus on a different party and analyse its performance. Also, note that this is an official dataset, hence it comes equal every election. Once the variable names are translated into English, the same code still applies. Last, note that this article may easily be transformed into an interactive analysis where users choose one party to focus on and to switch to different years, after additional years’ elections data is downloaded.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
