<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Discovering users’ eating preferences</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-1.1/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-1.1/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Emanuela Furfaro</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Data analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="data-an-workflow.html">The Data Workflow</a>
    </li>
    <li>
      <a href="elections2.html">Elections</a>
    </li>
    <li>
      <a href="restaurants.html">Restaurant rating</a>
    </li>
    <li>
      <a href="age-pyramid.html">Age pyramid</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Statistics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Asymptotic Theorems</li>
    <li>
      <a href="lln.html">The Law of Large numbers</a>
    </li>
    <li>
      <a href="tcl.html">The Central Limit Theorem</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Discovering users’ eating preferences</h1>

</div>


<p>In this post I play around with <code>R</code> to investigate the users’ preferences on restaurants. Somewhere on the net, I found a set of 3 datasets containing information on users, restaurants on the users’ ratings on those restaurants. In my <code>R</code> lessons, they often serve as an example of data manipulation using the <code>tidyverse</code> tools.</p>
<div id="data-preparation" class="section level2">
<h2>Data Preparation</h2>
<p>After we load the <code>R</code> packages we will need:</p>
<pre class="r"><code>require(tidyverse)</code></pre>
<p>and the datasets:</p>
<pre class="r"><code>chefmozcuisine &lt;- read_delim(&quot;data/chefmozcuisine.csv&quot;, delim = &quot;,&quot;, col_names = T)
userprofile &lt;- read_delim(&quot;data/userprofile.csv&quot;, delim = &quot;,&quot;, col_names = T)
rating_final &lt;- read_delim(&quot;data/rating_final.csv&quot;, delim = &quot;,&quot;, col_names = T)</code></pre>
<p>First we need to manipulate the data a bit. For example we want to make sure that IDs are character instead of numeric so that we do not accidentally calculate anything on them:</p>
<pre class="r"><code>rating_final &lt;- rating_final %&gt;% mutate(placeID = as.character(placeID))
chefmozcuisine &lt;- chefmozcuisine %&gt;% mutate(placeID = as.character(placeID))</code></pre>
<p>Another frequent issue is missing data. In these tabes missingness is coded as “?” which is not the missingness symbol in <code>R</code>. Hence with a small additional manipulation:</p>
<pre class="r"><code>userprofile &lt;- userprofile %&gt;% na_if(&quot;?&quot;)</code></pre>
</div>
<div id="data-exploration" class="section level2">
<h2>Data exploration</h2>
<p>In order to be able to better understand and interpret the answers to our questions, in this section we may start understanding what kind of data we are working with is available: what kind of users and what kind of restaurants do we have in the datasets?</p>
<p>Let us first focus on restaurants. The dataset contains the restaurants’ id and the type of cusine. It contains info on 916 different restaurants and there are Spanish, Italian, Latin_American, Mexican, Fast_Food, Burgers, Dessert-Ice_Cream, Hot_Dogs, Steaks, Asian, International, Mongolian, Vegetarian, Brazilian, Cafe-Coffee_Shop, Cafeteria, Contemporary, Deli-Sandwiches, Diner, Japanese, Sushi, Seafood, Chinese, Bar, Bar_Pub_Brewery, Pizzeria, Mediterranean, American, Family, Caribbean, African, Breakfast-Brunch, Regional, Afghan, Bakery, Game, Armenian, Vietnamese, Korean, Thai, Barbecue, Polish, Dutch-Belgian, French, German, Southwestern, Persian, Ethiopian, Juice, Soup, Continental-European, Greek, Southern, Eastern_European, California, Bagels, Turkish, Organic-Healthy, Fine_Dining different types of cuisine. Let us focus only on the 10 most frequent types of cusine:</p>
<pre class="r"><code>top10_cuisine &lt;- chefmozcuisine %&gt;% group_by(Rcuisine) %&gt;%
  summarise(freq = n()) %&gt;%
  arrange(desc(freq)) %&gt;%
  slice(1:10)

ggplot(data = top10_cuisine) +
  geom_bar(aes(x=Rcuisine, y = freq, fill = Rcuisine), stat = &quot;identity&quot;) +
  labs(x = &quot;Type of cuisine&quot;, y = &quot;frequency&quot;) +
  theme_bw() +
  theme(legend.position=&quot;&quot;)</code></pre>
<p><img src="restaurants_files/figure-html/unnamed-chunk-5-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Mexican seems much more popular than any other type of cusine as there are nearly 250 different restaurants.</p>
<p>The users’ dataset contains info on 138 users. Most of the users are students, either low or medium budget, does not smoke and like drinking when they go out:</p>
<pre class="r"><code>ggplot(data = userprofile) +
  geom_bar(aes(x = activity, fill = activity)) +
  theme_bw() +
  theme(legend.position=&quot;&quot;)</code></pre>
<p><img src="restaurants_files/figure-html/unnamed-chunk-6-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>ggplot(data = userprofile) +
  geom_bar(aes(x = budget, fill = budget)) +
  theme_bw() +
  theme(legend.position=&quot;&quot;)</code></pre>
<p><img src="restaurants_files/figure-html/unnamed-chunk-7-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>ggplot(data = userprofile) +
  geom_bar(aes(x = smoker, fill = smoker)) +
  theme_bw() +
  theme(legend.position=&quot;&quot;)</code></pre>
<p><img src="restaurants_files/figure-html/unnamed-chunk-8-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>ggplot(data = userprofile) +
  geom_bar(aes(x = drink_level, fill = drink_level)) +
  theme_bw() +
  theme(legend.position=&quot;&quot;)</code></pre>
<p><img src="restaurants_files/figure-html/unnamed-chunk-9-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="answering-questions" class="section level2">
<h2>Answering questions</h2>
<p>Now we are ready to combine all the tables and use them to answer questions.</p>
<p>Which restaurant has got the best reviews?</p>
<pre class="r"><code>tab &lt;- rating_final %&gt;% 
  group_by(placeID) %&gt;% 
  count(rating) %&gt;% 
    mutate(prop = prop.table(n)) 

knitr::kable(tab %&gt;%
    head(10), &quot;html&quot;) %&gt;%
  kableExtra::kable_styling(full_width = F, font_size = 11, position = &quot;center&quot;)</code></pre>
<?xml version="1.0" encoding="UTF-8"?>
<table class="table" style="font-size: 11px; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
placeID
</th>
<th style="text-align:right;">
rating
</th>
<th style="text-align:right;">
n
</th>
<th style="text-align:right;">
prop
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
132560
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.50
</td>
</tr>
<tr>
<td style="text-align:left;">
132560
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.50
</td>
</tr>
<tr>
<td style="text-align:left;">
132561
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.25
</td>
</tr>
<tr>
<td style="text-align:left;">
132561
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.75
</td>
</tr>
<tr>
<td style="text-align:left;">
132564
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.75
</td>
</tr>
<tr>
<td style="text-align:left;">
132564
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.25
</td>
</tr>
<tr>
<td style="text-align:left;">
132572
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.20
</td>
</tr>
<tr>
<td style="text-align:left;">
132572
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
0.60
</td>
</tr>
<tr>
<td style="text-align:left;">
132572
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.20
</td>
</tr>
<tr>
<td style="text-align:left;">
132583
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.25
</td>
</tr>
</tbody>
</table>
<p>Which restaurant has got the best reviews in terms of average rating?</p>
<pre class="r"><code>tab &lt;- rating_final %&gt;% 
  group_by(placeID) %&gt;%
  summarise_at(vars(rating, food_rating, service_rating), 
               funs(mean, n())) %&gt;%
  arrange(desc(rating_n), desc(rating_mean), desc(food_rating_mean), desc(service_rating_mean)) %&gt;%
  left_join(chefmozcuisine) 

knitr::kable(tab %&gt;%
    head(10), &quot;html&quot;) %&gt;%
  kableExtra::kable_styling(full_width = F, font_size = 11, position = &quot;center&quot;)</code></pre>
<?xml version="1.0" encoding="UTF-8"?>
<table class="table" style="font-size: 11px; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
placeID
</th>
<th style="text-align:right;">
rating_mean
</th>
<th style="text-align:right;">
food_rating_mean
</th>
<th style="text-align:right;">
service_rating_mean
</th>
<th style="text-align:right;">
rating_n
</th>
<th style="text-align:right;">
food_rating_n
</th>
<th style="text-align:right;">
service_rating_n
</th>
<th style="text-align:left;">
Rcuisine
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
135085
</td>
<td style="text-align:right;">
1.333333
</td>
<td style="text-align:right;">
1.472222
</td>
<td style="text-align:right;">
1.1666667
</td>
<td style="text-align:right;">
36
</td>
<td style="text-align:right;">
36
</td>
<td style="text-align:right;">
36
</td>
<td style="text-align:left;">
Fast_Food
</td>
</tr>
<tr>
<td style="text-align:left;">
132825
</td>
<td style="text-align:right;">
1.281250
</td>
<td style="text-align:right;">
1.343750
</td>
<td style="text-align:right;">
0.9375000
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:left;">
Mexican
</td>
</tr>
<tr>
<td style="text-align:left;">
135032
</td>
<td style="text-align:right;">
1.178571
</td>
<td style="text-align:right;">
1.071429
</td>
<td style="text-align:right;">
1.0714286
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:left;">
Cafeteria
</td>
</tr>
<tr>
<td style="text-align:left;">
135032
</td>
<td style="text-align:right;">
1.178571
</td>
<td style="text-align:right;">
1.071429
</td>
<td style="text-align:right;">
1.0714286
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:left;">
Contemporary
</td>
</tr>
<tr>
<td style="text-align:left;">
135052
</td>
<td style="text-align:right;">
1.280000
</td>
<td style="text-align:right;">
1.160000
</td>
<td style="text-align:right;">
1.1600000
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:left;">
Bar
</td>
</tr>
<tr>
<td style="text-align:left;">
135052
</td>
<td style="text-align:right;">
1.280000
</td>
<td style="text-align:right;">
1.160000
</td>
<td style="text-align:right;">
1.1600000
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:left;">
Bar_Pub_Brewery
</td>
</tr>
<tr>
<td style="text-align:left;">
132834
</td>
<td style="text-align:right;">
1.000000
</td>
<td style="text-align:right;">
1.120000
</td>
<td style="text-align:right;">
0.8800000
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:left;">
Mexican
</td>
</tr>
<tr>
<td style="text-align:left;">
135038
</td>
<td style="text-align:right;">
1.208333
</td>
<td style="text-align:right;">
1.166667
</td>
<td style="text-align:right;">
0.9583333
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
135060
</td>
<td style="text-align:right;">
1.136364
</td>
<td style="text-align:right;">
1.045454
</td>
<td style="text-align:right;">
1.2727273
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:left;">
Seafood
</td>
</tr>
<tr>
<td style="text-align:left;">
135062
</td>
<td style="text-align:right;">
1.238095
</td>
<td style="text-align:right;">
1.238095
</td>
<td style="text-align:right;">
1.0952381
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
<p>What is the favourite restaurant for smokers?</p>
<pre class="r"><code>tab &lt;- userprofile%&gt;% 
  filter(smoker == &quot;true&quot;) %&gt;%
  left_join(rating_final) %&gt;%
  group_by(placeID) %&gt;%
  summarise_at(vars(rating_mean = rating, food_rating_mean = food_rating, 
                    service_rating_mean = service_rating), 
               funs(mean, n())) %&gt;%
  arrange(desc(rating_mean), desc(food_rating_mean), desc(service_rating_mean)) %&gt;%
  left_join(chefmozcuisine) 

knitr::kable(tab %&gt;%
    head(10), &quot;html&quot;) %&gt;%
  kableExtra::kable_styling(full_width = F, font_size = 11, position = &quot;center&quot;)</code></pre>
<?xml version="1.0" encoding="UTF-8"?>
<table class="table" style="font-size: 11px; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
placeID
</th>
<th style="text-align:right;">
rating_mean
</th>
<th style="text-align:right;">
food_rating_mean
</th>
<th style="text-align:right;">
service_rating_mean
</th>
<th style="text-align:right;">
rating_n
</th>
<th style="text-align:right;">
food_rating_n
</th>
<th style="text-align:right;">
service_rating_n
</th>
<th style="text-align:left;">
Rcuisine
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
132660
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
132755
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Mexican
</td>
</tr>
<tr>
<td style="text-align:left;">
132767
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Vietnamese
</td>
</tr>
<tr>
<td style="text-align:left;">
132830
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
132884
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
132958
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
American
</td>
</tr>
<tr>
<td style="text-align:left;">
134986
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
International
</td>
</tr>
<tr>
<td style="text-align:left;">
134999
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Japanese
</td>
</tr>
<tr>
<td style="text-align:left;">
135000
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
135019
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Bar
</td>
</tr>
</tbody>
</table>
<p>What is the favourite restaurant for people with a low budget?</p>
<pre class="r"><code>tab &lt;- userprofile %&gt;% 
  filter(budget == &quot;low&quot;) %&gt;%
  left_join(rating_final) %&gt;%
  group_by(placeID) %&gt;%
  summarise_at(vars(rating_mean = rating, food_rating_mean = food_rating, 
                    service_rating_mean = service_rating), 
               funs(mean, n())) %&gt;%
  arrange(desc(rating_mean), desc(food_rating_mean), desc(service_rating_mean)) %&gt;%
  left_join(chefmozcuisine) 

knitr::kable(tab %&gt;%
    head(10), &quot;html&quot;) %&gt;%
  kableExtra::kable_styling(full_width = F, font_size = 11, position = &quot;center&quot;)</code></pre>
<?xml version="1.0" encoding="UTF-8"?>
<table class="table" style="font-size: 11px; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
placeID
</th>
<th style="text-align:right;">
rating_mean
</th>
<th style="text-align:right;">
food_rating_mean
</th>
<th style="text-align:right;">
service_rating_mean
</th>
<th style="text-align:right;">
rating_n
</th>
<th style="text-align:right;">
food_rating_n
</th>
<th style="text-align:right;">
service_rating_n
</th>
<th style="text-align:left;">
Rcuisine
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
132884
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2.00
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
132958
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2.00
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
American
</td>
</tr>
<tr>
<td style="text-align:left;">
134975
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2.00
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
134996
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2.00
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
135049
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2.00
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Seafood
</td>
</tr>
<tr>
<td style="text-align:left;">
135055
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2.00
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Mexican
</td>
</tr>
<tr>
<td style="text-align:left;">
132608
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2.00
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Mexican
</td>
</tr>
<tr>
<td style="text-align:left;">
132723
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2.00
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Mexican
</td>
</tr>
<tr>
<td style="text-align:left;">
132755
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2.00
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Mexican
</td>
</tr>
<tr>
<td style="text-align:left;">
135075
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.75
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Seafood
</td>
</tr>
</tbody>
</table>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
